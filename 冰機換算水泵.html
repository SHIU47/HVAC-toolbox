<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>冰機雙系統水泵計算工具</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        body {
            font-family: 'Noto+Sans+TC', sans-serif;
            background-color: #f1f5f9;
        }
        .input-blue {
            color: #2563eb;
            font-weight: bold;
        }
        .section-card {
            transition: transform 0.2s ease;
        }
        .section-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-5xl mx-auto">
        <!-- 標題與核心輸入區 -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">冰機雙系統水泵計算器</h1>
                    <p class="text-gray-500 text-sm">輸入冰機噸數，同時推算冰水泵與冷卻水泵需求</p>
                </div>
                <div class="bg-blue-50 p-4 rounded-xl border border-blue-200">
                    <label class="block text-sm font-bold text-blue-700 mb-1">冰機額定噸數 (RT)</label>
                    <input type="number" id="mainRT" value="100" 
                        class="w-full md:w-48 p-3 text-2xl border-2 border-blue-300 rounded-lg focus:ring-4 focus:ring-blue-100 focus:outline-none input-blue">
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- 冰水泵系統 (Chilled Water) -->
            <div class="section-card bg-white rounded-2xl shadow-md overflow-hidden border-t-4 border-blue-500">
                <div class="p-5 bg-blue-50 border-b border-blue-100 flex justify-between items-center">
                    <h2 class="text-lg font-bold text-blue-800 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        1. 冰水泵系統 (CHW)
                    </h2>
                    <span class="text-xs font-medium bg-blue-200 text-blue-800 px-2 py-1 rounded">1.0x RT</span>
                </div>
                
                <div class="p-6 space-y-6">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">溫差 ΔT (℃)</label>
                            <input type="number" id="chwDT" value="5" class="w-full p-2 border rounded-md input-blue">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">揚程 (m)</label>
                            <input type="number" id="chwHead" value="20" class="w-full p-2 border rounded-md input-blue">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">效率 (%)</label>
                            <input type="number" id="chwEff" value="70" class="w-full p-2 border rounded-md input-blue">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-slate-50 p-3 rounded-lg">
                            <p class="text-[10px] text-gray-400">冰水流量 (LPS)</p>
                            <p class="text-xl font-bold text-gray-800" id="resChwLPS">0.00</p>
                        </div>
                        <div class="bg-slate-50 p-3 rounded-lg">
                            <p class="text-[10px] text-gray-400">冰水流量 (LPM)</p>
                            <p class="text-xl font-bold text-gray-800" id="resChwLPM">0.00</p>
                        </div>
                    </div>

                    <div class="bg-blue-600 p-4 rounded-xl text-white">
                        <p class="text-xs opacity-80">冰水泵預估耗電</p>
                        <p class="text-3xl font-black"><span id="resChwPower">0.00</span> <span class="text-sm font-normal">kW</span></p>
                    </div>
                </div>
            </div>

            <!-- 冷卻水泵系統 (Cooling Water) -->
            <div class="section-card bg-white rounded-2xl shadow-md overflow-hidden border-t-4 border-emerald-500">
                <div class="p-5 bg-emerald-50 border-b border-emerald-100 flex justify-between items-center">
                    <h2 class="text-lg font-bold text-emerald-800 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.99 7.99 0 0120 13a7.99 7.99 0 01-2.343 5.657z"></path></svg>
                        2. 冷卻水泵系統 (CW)
                    </h2>
                    <span class="text-xs font-medium bg-emerald-200 text-emerald-800 px-2 py-1 rounded">1.1x RT 推估</span>
                </div>
                
                <div class="p-6 space-y-6">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">溫差 ΔT (℃)</label>
                            <input type="number" id="cwDT" value="5" class="w-full p-2 border rounded-md input-blue">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">揚程 (m)</label>
                            <input type="number" id="cwHead" value="25" class="w-full p-2 border rounded-md input-blue">
                        </div>
                        <div>
                            <label class="block text-xs text-gray-500 mb-1">效率 (%)</label>
                            <input type="number" id="cwEff" value="70" class="w-full p-2 border rounded-md input-blue">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-slate-50 p-3 rounded-lg">
                            <p class="text-[10px] text-gray-400">冷卻流量 (LPS)</p>
                            <p class="text-xl font-bold text-gray-800" id="resCwLPS">0.00</p>
                        </div>
                        <div class="bg-slate-50 p-3 rounded-lg">
                            <p class="text-[10px] text-gray-400">冷卻流量 (LPM)</p>
                            <p class="text-xl font-bold text-gray-800" id="resCwLPM">0.00</p>
                        </div>
                    </div>

                    <div class="bg-emerald-600 p-4 rounded-xl text-white">
                        <p class="text-xs opacity-80">冷卻水泵預估耗電</p>
                        <p class="text-3xl font-black"><span id="resCwPower">0.00</span> <span class="text-sm font-normal">kW</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 說明文字 -->
        <div class="mt-6 bg-gray-100 p-4 rounded-lg text-[11px] text-gray-500">
            <p>● 流量計算公式：(RT × 修正係數 × 3024) / (ΔT × 60) = LPM</p>
            <p>● 耗電計算公式：(LPS × 揚程) / (102 × 效率) = kW</p>
            <p>● 冷卻水修正係數：依指示採用 1.1 倍 RT 進行推估。</p>
        </div>
    </div>

    <script>
        function calculateAll() {
            // 基礎 RT
            const baseRT = parseFloat(document.getElementById('mainRT').value) || 0;

            // --- 冰水計算 ---
            const chwDT = parseFloat(document.getElementById('chwDT').value) || 1;
            const chwHead = parseFloat(document.getElementById('chwHead').value) || 0;
            const chwEff = parseFloat(document.getElementById('chwEff').value) || 1;

            const chwLPM = (baseRT * 3024) / (chwDT * 60);
            const chwLPS = chwLPM / 60;
            const chwKW = (chwLPS * chwHead) / (102 * (chwEff / 100));

            updateUI('resChwLPM', chwLPM);
            updateUI('resChwLPS', chwLPS);
            updateUI('resChwPower', chwKW);

            // --- 冷卻水計算 (1.1倍 RT) ---
            const cwRT = baseRT * 1.1; 
            const cwDT = parseFloat(document.getElementById('cwDT').value) || 1;
            const cwHead = parseFloat(document.getElementById('cwHead').value) || 0;
            const cwEff = parseFloat(document.getElementById('cwEff').value) || 1;

            const cwLPM = (cwRT * 3024) / (cwDT * 60);
            const cwLPS = cwLPM / 60;
            const cwKW = (cwLPS * cwHead) / (102 * (cwEff / 100));

            updateUI('resCwLPM', cwLPM);
            updateUI('resCwLPS', cwLPS);
            updateUI('resCwPower', cwKW);
        }

        function updateUI(id, val) {
            document.getElementById(id).innerText = val.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
        }

        // 監聽所有輸入
        const inputIds = ['mainRT', 'chwDT', 'chwHead', 'chwEff', 'cwDT', 'cwHead', 'cwEff'];
        inputIds.forEach(id => {
            document.getElementById(id).addEventListener('input', calculateAll);
        });

        // 初始執行
        window.onload = calculateAll;
    </script>
</body>
</html>
